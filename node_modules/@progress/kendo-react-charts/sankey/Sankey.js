/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const D=require("react"),M=require("@progress/kendo-charts"),x=require("./theme-service.js"),k=require("@progress/kendo-react-common"),H=require("../package-metadata.js"),_=require("./propTypes.js"),p=require("./SankeyTooltip.js");function I(e){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return i.default=e,Object.freeze(i)}const o=I(D),q=12,y={offset:q,visible:!0},K=["nodeEnter","nodeLeave","linkEnter","linkLeave","nodeClick","linkClick"],V=(e,i)=>{e&&(e.unbind(),K.forEach(t=>{i[t]&&e.bind(t,i[t])}))},b=o.forwardRef((e,i)=>{k.validatePackage(H.packageMetadata);const t=o.useRef(null),r=o.useRef(null),s=k.useRtl(t,e.dir,[e.dir,t.current]),d=o.useRef(null),{data:m,links:g,nodes:v,labels:C,title:E,legend:T,tooltip:u=y,disableAutoLayout:R,disableKeyboardNavigation:S}=e,L=o.useRef();L.current=e;const[O,h]=o.useState(null),N=o.useCallback(l=>{const{visible:c,offset:n=q,nodeComponent:f=p.NodeTooltipContent,linkComponent:j=p.LinkTooltipContent}={...y,...u};if(c){const w={event:l,offset:n,dir:s,Content:l.targetType==="node"?f:j};h(w)}},[u,s]),P=o.useCallback(()=>{h(null)},[]),a=o.useCallback((l,c)=>{const n=L.current[l];if(n){const f={...c,nativeEvent:c.originalEvent,target:d.current};n.call(void 0,f)}},[]);return o.useEffect(()=>{const l={data:m,links:g,nodes:v,labels:C,title:E,legend:T,disableAutoLayout:R,disableKeyboardNavigation:S,rtl:s==="rtl",tooltip:{...y,...u}};return r.current?r.current.setOptions(l):k.canUseDOM&&t.current&&x.loadTheme(t.current.ownerDocument,c=>{r.current=new M.Sankey(t.current,l,c),V(r.current,{nodeEnter:n=>{a("onNodeEnter",n)},nodeLeave:n=>{a("onNodeLeave",n)},linkEnter:n=>{a("onLinkEnter",n)},linkLeave:n=>{a("onLinkLeave",n)},nodeClick:n=>{a("onNodeClick",n)},linkClick:n=>{a("onLinkClick",n)}}),r.current.bind("tooltipShow",N),r.current.bind("tooltipHide",P)}),()=>{r.current&&(r.current.destroy(),r.current=null)}},[m,g,v,C,E,T,R,S,s,u,P,N,a]),o.useImperativeHandle(d,()=>({get element(){return t.current},exportVisual:l=>r.current.exportVisual(l),props:e}),[]),o.useImperativeHandle(i,()=>d.current),o.createElement(o.Fragment,null,o.createElement("div",{ref:t,className:e.className,style:e.style,dir:s}),O&&o.createElement(p.TooltipComponent,{...O}))});b.propTypes=_.sankeyPropTypes;b.displayName="KendoReactSankey";exports.Sankey=b;
